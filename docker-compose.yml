version: '3'

services:
  mysql:
    image: mysql:5.7
    ports:
    - "3306:3306"
    volumes:
    - db-volume:/var/lib/mysql:Z
    - ./mysql-initdb:/docker-entrypoint-initdb.d
    environment:
    - MYSQL_ROOT_PASSWORD=secret
    command:
    - "--max_allowed_packet=128M"
    - "--character-set-server=utf8"
    - "--collation-server=utf8_unicode_ci"

  olt:
    image: openltablets/webstudio:5.21.12
    depends_on:
    - mysql
    ports:
    - "8080:80"
    volumes:
    - olt-volume:/root/.openl
    - ./driver:/usr/local/tomcat/shared/lib
    - ./webservices:/usr/local/tomcat/webapps/webservices
    links:
    - mysql

volumes:
    db-volume:
    olt-volume:
